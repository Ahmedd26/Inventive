<!-- <div class="text-xl">
  <i-feather name="settings" />
</div> -->

<custom-modal
  buttonText=""
  buttonClasses="text-xl"
  iconName="settings"
  modalHeader="Purchase order actions"
  acceptButtonText="Close"
  (accept)="this.modal.closeModal()"
  #modal
>
  <div class="border-b border-stone-700 pb-4">
    <label
      for="status"
      class="mb-4 block text-xl font-semibold text-stone-900 dark:text-white"
      >Update status</label
    >
    <select
      id="status"
      (change)="updateStatus($event)"
      class="block w-full rounded-lg border border-stone-300 bg-stone-50 p-2.5 text-sm capitalize text-stone-900 focus:border-amber-500 focus:ring-amber-500 dark:border-stone-600 dark:bg-stone-700 dark:text-white dark:placeholder-stone-400 dark:focus:border-amber-500 dark:focus:ring-amber-500"
    >
      <option [value]="currentStatus" selected>{{ currentStatus }}</option>
      @for (status of getFilteredStatus(); track status) {
        <option [value]="status">{{ status }}</option>
      }
    </select>
    <div class="my-8 flex justify-center">
      @if (isLoading) {
        <div class="flex flex-row gap-2">
          <div
            class="h-4 w-4 animate-bounce rounded-full bg-amber-700 [animation-delay:.7s]"
          ></div>
          <div
            class="h-4 w-4 animate-bounce rounded-full bg-amber-700 [animation-delay:.3s]"
          ></div>
          <div
            class="h-4 w-4 animate-bounce rounded-full bg-amber-700 [animation-delay:.7s]"
          ></div>
        </div>
      }
      @if (successMessage) {
        <div
          class="text-center text-xl font-bold text-green-700 dark:text-green-500"
        >
          {{ successMessage }}
        </div>
      }
      @if (errorMessage) {
        <div
          class="text-center text-xl font-bold text-red-600 dark:text-red-500"
        >
          {{ errorMessage }}
        </div>
      }
    </div>
  </div>
  <div class="mt-4">
    <h4 class="mb-4 text-xl font-semibold">Delete</h4>
    <p class="mb-4 max-w-sm text-red-600 dark:text-red-500">
      It's recommended to keep cancelled orders recorded, unless you have placed
      the order by mistake you can delete the order, are you sure you want to
      delete the order?
      <span class="font-bold">"This action cannot be undone"</span>
    </p>
    <div class="flex justify-center">
      <button
        type="button"
        (click)="deleteOrder()"
        class="flex items-center gap-2 rounded-lg border border-red-700 px-5 py-2.5 text-center text-sm font-medium text-red-700 hover:bg-red-800 hover:text-white focus:outline-none focus:ring-4 focus:ring-red-300 dark:border-red-500 dark:text-red-500 dark:hover:bg-red-600 dark:hover:text-white dark:focus:ring-red-900"
      >
        <i-feather name="trash" />
        Yes, I'm sure
      </button>
    </div>
  </div>
</custom-modal>
