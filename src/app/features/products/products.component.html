@if(isLoading){
<app-loading />
} @if(error){
<div
  class="min-h-[calc(100dvh-120px)] flex flex-col justify-center items-center gap-6"
>
  <span
    class="block text-7xl font-extrabold text-stone-700 dark:text-stone-600"
    >{{ error.status }}</span
  >
  <h2 class="text-4xl font-extrabold text-stone-800 dark:text-stone-200">
    An error occurred
  </h2>
  <p>{{ error.status === 404 ? "Resource was not found" : error.message }}</p>
</div>
}@else{
<div class="text-stone-800 dark:text-white">
  <div class="flex justify-between items-center mb-5">
    <h1 class="text-4xl font-semibold">Products</h1>
    <!-- <app-create-supplier-modal (supplierCreated)="onCreateSupplier($event)" /> -->
    <app-create-product-modal (product)="addNewProduct($event)" />
  </div>

  <div class="mt-8 grid grid-cols-1 xl:grid-cols-2 gap-4">
    @for(product of products; track product.id){

    <div
      class="p-4 relative h-full min-h-36 grid grid-cols-1 md:grid-cols-3 gap-y-4 md:gap-4"
    >
      <div
        class="absolute right-0 z-0 bottom-0 w-full h-4/5 md:w-4/5 md:h-full bg-stone-50 dark:bg-stone-800 rounded-lg shadow-lg"
      >
        <!-- Cropped Background -->
      </div>
      <img
        [src]="product.image"
        alt="Product Image"
        class="w-full h-full block mx-auto aspect-square object-cover rounded-lg shadow-lg border border-stone-600 dark:border-stone-500 overflow-hidden image-skeleton"
      />
      <div class="z-10 col-span-2 h-full flex-col flex gap-4">
        <h3
          class="text-lg font-bold text-stone-800 dark:text-stone-200 max-w-[80%]"
        >
          {{ product.name }}
        </h3>
        <div
          class="dark:text-stone-300/80 grid grid-cols-1 sm:grid-cols-2 gap-2"
        >
          <div class="flex items-center flex-1 gap-2">
            <h4 class="font-semibold">SKU:</h4>
            <h4>{{ product.sku }}</h4>
          </div>
          <div class="flex items-center flex-1 gap-2">
            <h4 class="font-semibold">Price:</h4>
            <h4>{{ product.price | currency }}</h4>
          </div>
          <div class="flex items-center flex-1 gap-2">
            <h4 class="font-semibold">Added:</h4>
            <h4>{{ product.created_at | date : "shortDate" }}</h4>
          </div>
          <div class="flex items-center flex-1 gap-2">
            <h4 class="font-semibold">Updated:</h4>
            <h4>{{ product.price | date : "shortDate" }}</h4>
          </div>
        </div>
        <div class="flex items-center gap-2 mt-auto">
          <span
            class="bg-amber-100 text-amber-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-amber-900 dark:text-amber-300"
          >
            {{ product.category?.name }}</span
          >
          <span
            class="bg-stone-200 text-stone-800 text-xs font-medium px-2.5 py-0.5 rounded dark:bg-stone-900 dark:text-stone-300"
          >
            <span class="font-extrabold"> FROM: </span>
            {{ product.supplier?.name }}</span
          >
          <a
            [routerLink]="['/products', product.id]"
            class="absolute rounded-bl-lg rounded-tr-lg shadow top-4 right-4 md:top-0 md:right-0 px-4 py-2 dark:bg-stone-700/80 dark:hover:bg-stone-700 text-stone-400 hover:text-stone-50 duration-150"
            >View</a
          >
        </div>
      </div>
    </div>
    }
  </div>
</div>
}
